<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">





<head>
	<link rel="canonical" href="http://brunosan.eu/" />
	<meta http-equiv="content-type" content="text/html; charset=utf-8" /> <title>Jekyll and Pull Requests</title> <meta name="author" content="Bruno Sánchez-Andrade Nuño - brunosan" />

	<!-- Google fonts -->
	<link href='http://fonts.googleapis.com/css?family=Oxygen|Arvo' rel='stylesheet' type='text/css'>
	<link href='http://fonts.googleapis.com/css?family=Economica:400,700' rel='stylesheet' type='text/css'>
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
	<link href='http://fonts.googleapis.com/css?family=Lustria' rel='stylesheet' type='text/css'>

   <!--Google Plus  -->
   <link href="https://plus.google.com/114359371386539617196" rel="publisher" />
   
   <!-- Syntax highlighting CSS -->
   <link rel="stylesheet" href="http://brunosan.eu/css/syntax.css" type="text/css" />

   <!-- Main CSS -->
   <link rel="stylesheet" href="http://brunosan.eu/css/screen.css" type="text/css" media="screen, projection" />

	<!-- JQuery -->
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
	<script type="text/javascript" src="http://brunosan.eu/js/footnote-popup.js"></script>
	<script type="text/javascript" src="http://brunosan.eu/js/tinybox.js"></script>
   <!-- Google Analytics -->
   <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-33215020-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();


</script>

  <!-- Facebook -->
<script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=159289677540507";
    fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>

  <!-- RSS announce -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="http://brunosan.eu/feed.xml">

</head>
<body>

<table>
	<tr><td>
	<header>
		<h1><a href="/index.html">Saepe cadendo</a></h1>
		<p>by <a href="/about">brunosan</a></p>
	</header>
  <nav>
    <ul>
	  	  	<li><a href="/archives.html">Archive</a></li>
	  		<li><a href="/about">About</a></li>
        <li><a href="http://twitter.com/brunosan">Twitter </a></li>
	  	  	<li><a href="http://brunosan.github.com/cv/">C.V.</a></li>
		</ul>

    <script type="text/javascript"><!--
  google_ad_client = "ca-pub-5329469040290415";
  /* brunosan.eu */
  google_ad_slot = "0978857405";
  google_ad_width = 120;
  google_ad_height = 240;
  //-->
</script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>



    </nav>

	<article>
		
		
<div id="post-" class="post">
  <h2>Jekyll and Pull Requests</h2>
  <div id="post_content">
    <p><strong>I´m migrating my blog to this new system. Sorry for the many bugs. I´ll
appreciate any <a href="email:brunosan@gmail.com">comments or suggestions</a>.</strong></p>

<p>When I migrated this site to <a href="http://jekyllrb.com/">Jekyll</a> I wanted to focus on the content. Any page on this blog is less than 2 clicks away. I´ve been blogging since 2004, so this means I have over 200 pages. While testing the new site I was flabbergasted with the many typos and edits I wanted to correct or complement on <strong>many</strong> of the posts.</p>

<p>Fortunately this new system allows to send those edits very easily. I got the idea from <a href="https://github.com/dfm/dfm.github.com/blob/master/assets/comments.js">dfm</a>, that uses it as a comment system. I can review or comment on them, and add them extremely easy. That´s what the little button at the bottom of each post does. This &ldquo;&rdquo;<em>Send edit request</em>&ldquo;&rdquo; button is basically a link to a Github <a href="https://help.github.com/articles/using-pull-requests"><em>Pull Request</em></a>.</p>

<p>And this is how it works:<!--more--></p>

<p><strong>The site is made of flat text files</strong>
This site is made in <a href="http://jekyllrb.com/">Jekyll</a>, so everything is a flat text file. What Jekyll does is convert those files into html format ready for your browser.</p>

<p><strong>The site is a git repository on Github</strong>
The website is actually a <a href="http://en.wikipedia.org/wiki/Git_(software">git</a> repository. And <a href="www.github.com">Github</a> is the website where that repository lives, and from where this site is hosted. Among other many things git allows for <em>asynchronous collaboration</em>. One can just clone the repository. Git keeps track of the history of changes, and any modification on any clone or the main site can be easily integrated among clones, or the main repository. That means, for example, that I can write my posts offline, and then send my changes once I&rsquo;m online.</p>

<p><strong>A Pull request is only a link to a URL</strong>
What a <a href="https://help.github.com/articles/using-pull-requests"><em>Pull Request</em></a> does is make a clone of the repository of my website. When you make edits you can send them back to the main repository. Since you don´t have permission to change the website (only me), I receive a notification that someone is proposing changes. I can review them, modify them and integrate them.</p>

<p>This functionality is <strong>huge</strong> when developing software, specially open-source software. Anyone can propose edits than are integrated, and all those changes are authored in the history of the repository.</p>

<p>In my case all I need to do is create that link.</p>

<p>For example, this post that lives here:</p>

<pre><code>/2012/07/01/jekyll-pull-requests/
</code></pre>

<p>and its filename is:</p>

<pre><code>2012-07-01-jekyll-pull-requests.md
</code></pre>

<p>therefore the link should be:</p>

<pre><code>https://github.com/brunosan/brunosan.eu/edit/master/_posts/2012-07-01-jekyll-pull-requests.md
</code></pre>

<p>or if I use <a href="http://developmentseed.org/blog/2012/june/25/prose-a-content-editor-for-github/">prose</a> [at the moment prose does not allow pull request via url link]:</p>

<pre><code>http://prose.io/#brunosan/brunosan.eu/master/_posts/2012-07-01-jekyll-pull-requests.md
</code></pre>

<p>Getting the filename is tricky. <a href="http://www.twitter/dfm">Dan Foreman</a> constructed the filename using the date and title, but filenames can be different from titles. What I did is to create the variable <code>filename</code> on the YAML:</p>

<pre><code>---
filename: 2012-07-01-jekyll-pull-requests.md
layout: post
title: Jekyll and Pull Requests
tags:
- github
---
</code></pre>

<p>I would hate to need to add this manually, so I made a simple shell script that checks if the filename variable is present, and it adds it if not:</p>

<div><script src='https://gist.github.com/3058846.js?file='></script>
<noscript><pre><code>#!/bin/bash
cd _posts
for file in $(ls *.md)
do
    if grep -Fq &quot;filename: &quot; $file
    then
       # code if not found
       echo &quot;File: $file already processed&quot;
    else
        # code if found
        echo &quot;Adding the line on file: $file&quot;
        awk -v n=2 -v s=&quot;filename: $file&quot; 'NR == n {print s} {print}' $file &gt; tmp.txt
        mv tmp.txt $file
    fi

done</code></pre></noscript></div>


<p>You can see a <a href="https://github.com/brunosan/brunosan.eu/pulls">list of all my Pull Request</a>. Feel free to comment or test it. Just click below!</p>

  </div>



<p><time> 1 July 2012
•
<a id="pull-request-btn" class="btn" href="">
	            Send edit request
	        </a><a href="/2012/07/01/jekyll-pull-requests/">What is this?</a>
	</time>
	
        <div class='button share-links'>
          <ul>
            <li><a href="https://twitter.com/share" class="twitter-share-button" data-via="brunosan">Tweet</a>
            <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
            <li><div class="fb-like" data-width="0" data-href="http://brunosan.eu//2012/07/01/jekyll-pull-requests/" data-send="false" data-layout="button_count" data-width="450" data-show-faces="false"></div>
            <li><g:plusone annotation="none" size="medium" href="http://brunosan.eu//2012/07/01/jekyll-pull-requests/"></g:plusone>
          </ul>
          </div>
 </p>
                                                                    
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'brunosan'; // required: replace example with your forum shortname
    //var disqus_url = 'http://brunosan.eu//2012/07/01/jekyll-pull-requests/';
    //var disqus_developer = 1; // developer mode is on

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


<div id="related-posts">
  <h3>You might also like</h3>
  <div>
  
    <div class="related-post">
      <div class="title">
        <a href="/2012/09/14/migration-in-progress//" target="_top">
          Migration in progress
        </a>
      </div>
    </div>
  
    <div class="related-post">
      <div class="title">
        <a href="/2012/07/15/Next-steps-in-Open-Data//" target="_top">
          Next Steps in Open Data
        </a>
      </div>
    </div>
  
    <div class="related-post">
      <div class="title">
        <a href="/2012/07/07/contraportada-de-el-comercio//" target="_top">
          Contraportada de El Comercio
        </a>
      </div>
    </div>
  
    <div class="related-post">
      <div class="title">
        <a href="/2012/07/04/Higgs-Bosson-cartoon//" target="_top">
          Higgs Bosson cartoon
        </a>
      </div>
    </div>
  
    <div class="related-post">
      <div class="title">
        <a href="/2012/06/26/rio20-where-the-side-events-are-the-main-event//" target="_top">
          Rio+20. Where the "side events" are the main event
        </a>
      </div>
    </div>
  
  </div>
</div>

<h4 class="more">
	<a href="/archives.html">MORE ARTICLES IN THE ARCHIVE →</a>
</h4>



</div>

	
	</article>
	
	<footer>
		<p>Non vi, <em>sed saepe cadendo</em>.</p>

		<p>

    <a href="index.html">Home</a> •
		<a href="archives.html">Archive</a> •
    <a href="http://feeds.feedburner.com/brunosan/site">RSS</a> •
    <a href="http://twitter.com/brunosan">Twitter </a> •
    <a href="https://plus.google.com/114359371386539617196/posts">Google+ </a> •
		<a href="http://www.flickr.com/photos/nasonurb/">Flickr </a> •
		<a href="https://github.com/brunosan">Github </a> •
		<a href="http://www.linkedin.com/profile/view?id=20589360&locale=en_US&trk=tab_pro">C.V.</a>
		</p>

        Powered by <a href="http://github.com/mojombo/jekyll"> Jekyll </a> and <a href="http://www.github.com"> Github</a> [<a href="https://github.com/brunosan/brunosan.eu">Fork me</a>]. (cc) 2004-2012. See <a href="http://brunosan.eu/License">license</a> for details.</p>
	</footer>

	<div id="feedback">
		<a  onclick="TINY.box.show({iframe:'feedback/',boxid:'frameless',width:350,height:250,fixed:false,maskid:'bluemask',maskopacity:40,closejs:function(){closeJS()}})">Feedback</a>
	</div>
</td></tr>
</table>

<!-- Google Plus -->
<script type="text/javascript">
 (function() {
 var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
 po.src = 'https://apis.google.com/js/plusone.js';
 var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
 })();
</script>

</body>
</html>

